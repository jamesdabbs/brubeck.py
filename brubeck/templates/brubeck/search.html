{% extends "brubeck/base.html" %}
{% load bootstrap %}
{% load brubeck %}

{% block title %}Search{% endblock %}

{% block content %}
<section id="search">
    <form action="" method="GET" class="well form-search">
        {{ form.q|bootstrap:"span8 inline" }}
        <button class="btn">Search</button>
    </form>
</section>

<section>
{% if results %}
    {% if results.f %}
        <h3>Spaces matching "{{ results.f|safe }}"</h3>
        {% if results.f_spaces %}
        <ul>
            {% for s in results.f_spaces %}
            <li><a href="{{ s.get_absolute_url }}">{{ s.title }}</a></li>
            {% endfor %}
        </ul>
        {% else %}
        {% endif %}
    {% else %}
        {% if results.f_errors %}
        <h3>{{ results.f_errors.0 }}</h3>
        {% endif %}
    {% endif %}

    {% if results.t_count %}
    <h3>Full-text search</h3>
    <p>Found {{ results.t_count }} items. Showing top 10:</p>
    {% for doc in results.t_hits %}
        {% lookup_document doc as obj%}
        {% include "brubeck/includes/list_line.html" %}
    {% endfor %}
    {% endif %}
{% endif %}
</section>
{% endblock %}

{% block extra_head %}
{% include "brubeck/includes/formula_autocomplete/css.html" %}
{% endblock %}

{% block extra_scripts %}
{% include "brubeck/includes/formula_autocomplete/js.html" %}
{% endblock %}